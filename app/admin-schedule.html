---
title: Seed Of Church | 後台管理 | 行事曆管理
layout: ./app/admin-index.ejs
engine: ejs
current: index
---

<div class="contaner">
  <div class="row">
    <div class="col">

    </div>
    <div class="col">

    </div>
    <div class="col">
      <Button class="btn btn-primary">
        發佈
       </Button>
     <Button class="btn btn-outline-primary">
       儲存
       </Button>
    </div>
  </div>
</div>

<div class="container">
    <div class="row">
        

        <div class="col">

            <div class="form-outline">
                <div id="calendar"></div>


                 
           
            
        

            </div>

     
        </div>

 


    </div>
</div>


<script src="./assets/js/ProcessSchedule.js"></script>

<script>

var eventsArray = [
    {
      title  : '主日聚會',
      start  : '2022-12-11',
      color  : '#18A7A9'
    },
       {
      title  : '主日聚會',
      start  : '2022-12-18',
      color  : '#18A7A9'
    },
       {
      title  : '主日聚會',
      start  : '2022-12-25',
      end: '2022-12-30',
      color  : '#18A7A9',
      overlap: false,
              
    },
       {
      title  : '主日聚會',
      start  : '2022-12-04',
      color  : '#18A7A9'
    },
     {
      title  : '禱告聚會',
      start  : '2022-12-14',
      color  : '#559BED'
    },
      {
      title  : '禱告聚會',
      start  : '2022-12-07',
      color  : '#559BED'
    },
       {
      title  : '禱告聚會',
      start  : '2022-12-21',
      color  : '#559BED'
    },
       {
      title  : '禱告聚會',
      start  : '2022-12-28',
      color  : '#559BED'
    },
  ];

var calendarEl = document.getElementById('calendar');

var calendar = new FullCalendar.Calendar(calendarEl, {
    height: 1000,
    plugins: [ 'dayGrid', 'interaction' ],
    
    dateClick: function(info) { 
      
      // Swal.fire({
      //   title: '新增節日',
      //   input: 'text',
      //   inputAttributes: {
      //       autocapitalize: 'off'
      //   },
      //   showCancelButton: false,
      //   confirmButtonText: '確定',
      //   showLoaderOnConfirm: true,
      //   preConfirm: (login) => {
           
      //       return fetch(`${BaseURl}Schedules`)
      //       .then(response => {
      //           if (!response.ok) {
      //           throw new Error(response.statusText)
      //           }
      //           return response.json()
      //       })
      //       .catch(error => {
      //           Swal.showValidationMessage(
      //           `Request failed: ${error}`
      //           )
      //       })
      //   },
      //   allowOutsideClick: () => !Swal.isLoading()
      //   }).then((result) => {
      //       console.log(result)
      //       if (result.isConfirmed) {
      //           Swal.fire({
      //           title: `${result.value.login}'s avatar`,
      //           imageUrl: result.value.avatar_url
      //           })
      //       }
      //   })
      Swal.fire({
        title: '新增節日',
        input: 'text',
        // html:
        // '<input id="swal-input1" class="swal2-input">' +
        // '<input id="swal-input2" class="swal2-input">',
        
        inputPlaceholder: '請輸入節日或行程規劃', // placeholder，若「input: 'select'」則為空選項顯示文字
        inputValidator: function(value){
          return new Promise(function(resolve){
            if (value !== ''){
              resolve();
            }else{
              resolve('必填');
            }
          });
        }
      }).then(function(result){
        console.log(result.value);
        if(result.value!==undefined){
          eventsArray.push({
            date: info.dateStr,
            title: ""+result.value
          });
          
          calendar.refetchEvents();
          axios.post(`${BaseURl}Schedules`,{
            SCH_DATE: info.dateStr,
            title: ""+result.value,
            note:""
          })
              .then( (response) => {
                  console.log(response.data)

                  Swal.fire({
                      title: ` 新增成功!`,
                      text: '',
                      icon: 'success',
                      confirmButtonText: 'OK'
                    })
              })
              .catch( (error) => {
                  console.log(error)
              })


        }

        // result.value 為 '美女'
      });











    },
  
    eventClick: function(info) {
      alert(info.event.title)
    },
  
    events: function(info, successCallback, failureCallback) {
      successCallback(eventsArray);
    },
    eventColor: '#378006'
});

calendar.render();
</script>